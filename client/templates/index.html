<!doctype html>
<html>
<!--
author:lvlu
desc:this demo is about blog. PLEASE NOTE:If you have trouble running it ,try any of the other demos or connect with auther.
A ny individuals and organizations and not for commercial use, professiona website for customized web site.
-->
<head>
  <meta charset="utf-8">
  <title>首页_个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="images/bitbug_favicon.ico" type="image/x-icon" />
  <link href="static/css/base.css" rel="stylesheet">
  <link href="static/css/index.css" rel="stylesheet">
  <link href="static/css/m.css" rel="stylesheet">
  <script src="static/js/jquery.min.js" type="text/javascript"></script>
  <script src="static/js/jquery.easyfader.min.js"></script>
  <script src="static/js/scrollReveal.js"></script>
  <script src="static/js/common.js"></script>
</head>

<body>
  <header id="header">
    <!--menu begin-->
    <div class="menu">
      <nav class="nav" id="topnav">
        <h1 class="logo"><a href="index.html">博客</a></h1>
        <li><a href="index">网站首页</a> </li>
        <li><a href="list">文章列表</a>
          <ul class="sub-nav">
            <li><a href="list">Python</a></li>
            <li><a href="list">python Web</a></li>
            <li><a href="list">爬虫</a></li>
            <li><a href="list">人工智能</a></li>
            <li><a href="list">JS实例索引</a></li>
          </ul>
        </li>
        <li><a href="photo">我的相册</a>
        </li>
        <li><a href="gbook">留言</a> </li>
        <li><a href="about">关于我</a> </li>
          <li><a href="time">时间轴</a></li>
        <li><a href="release">发表博客</a></li>
      </nav>
    </div>
    <a href="/login" id="login" target="_blank">登录</a>
    <a href="/register" id="register" target="_blank">注册</a>
<!--    <a href="#" id="user" target="_blank" style="float: right"></a>-->
    <a href="/login" id="login_out" target="_blank" style="display:none">登出</a>

    <!--menu end-->
    <!--mnav begin-->
    <div id="mnav">
      <h2><a href="index" class="mlogo">个人博客</a><span class="navicon"></span></h2>
      <dl class="list_dl">
        <dt class="list_dt"> <a href="index">网站首页</a> </dt>
        <dt class="list_dt"> <a href="#">文章列表</a> </dt>
        <dd class="list_dd">
          <ul>
            <li><a href="list">Python</a></li>
            <li><a href="list">python Web</a></li>
            <li><a href="list">爬虫</a></li>
            <li><a href="list">人工智能</a></li>
            <li><a href="list">JS实例索引</a></li>
          </ul>
        </dd>
        <dt class="list_dt"> <a href="photo.html">我的相册</a> </dt>
        <dt class="list_dt"> <a href="time.html">时间轴</a> </dt>
        <dt class="list_dt"> <a href="gbook.html">留言</a> </dt>
        <dt class="list_dt"> <a href="about.html">关于我</a> </dt>
      </dl>
    </div>
    <!--mnav end-->


  </header>
  <article>
    <!--banner begin-->
    <div class="picsbox">
      <div class="banner">
        <div id="banner" class="fader">
          <li class="slide"><a href="info.html" target="_blank"><img src="static/images/banner01.jpg"><span class="imginfo">爬虫微课5小时
                python学习路线!</span></a></li>
          <li class="slide"><a href="info.html" target="_blank"><img src="static/images/banner02.jpg"><span class="imginfo">干货|如何优雅的在手机上进行Python编程</span></a></li>
          <li class="slide"><a href="info.html" target="_blank"><img src="static/images/banner03.jpg"><span class="imginfo">python-win10下使用定时任务执行程序</span></a></li>
          <div class="fader_controls">
            <div class="page prev" data-target="prev">&lsaquo;</div>
            <div class="page next" data-target="next">&rsaquo;</div>
            <ul class="pager_list">
            </ul>
          </div>
        </div>
      </div>
      <!--banner end-->
      <div class="toppic">
        <li> <a href="info.html" target="_blank"> <i><img src="static/images/toppic01.jpg"></i>
            <h2>linux升级py3,安装pip,svn</h2>
            <span>Linux</span>
          </a> </li>
        <li> <a href="info.html" target="_blank"> <i><img src="static/images/zd01.jpg"></i>
            <h2>精通Python编程——Python深入浅出教程</h2>
            <span>python</span>
          </a> </li>
      </div>
    </div>
    <div class="blank"></div>
    <div class="container"></div>
    <div class="sidebar">
      <div class="zhuanti">
        <h2 class="hometitle">特别推荐</h2>
        <ul>
          <li> <i><img src="static/images/banner03.jpg"></i>
            <p>CentOS7下python开发环境配置 <span><a href="#">阅读</a></span> </p>
          </li>
          <li> <i><img src="static/images/b04.jpg"></i>
            <p>Python基础概念_2_基础概念<span><a href="#">阅读</a></span></p>
          </li>
          <li> <i><img src="static/images/b05.jpg"></i>
            <p>Python之if判断语句与while和for循环<span><a href="#">阅读</a></span></p>
          </li>
        </ul>
      </div>
      <div class="tuijian">
        <h2 class="hometitle">推荐文章</h2>
        <ul class="tjpic">
          <i><img src="static/images/toppic01.jpg"></i>
          <p><a href="#">python中打开TXT文件报错</a></p>
        </ul>
        <ul class="sidenews">
          <li> <i><img src="static/images/toppic01.jpg"></i>
            <p><a href="#">python学习网址以及笔记</a></p>
            <span>2018-05-13</span>
          </li>
          <li> <i><img src="static/images/toppic02.jpg"></i>
            <p><a href="#">CentOS7下python开发环境配置</a></p>
            <span>2018-05-13</span>
          </li>
          <li> <i><img src="static/images/v1.jpg"></i>
            <p><a href="#">python初步实现word2vec</a></p>
            <span>2018-05-13</span>
          </li>
          <li> <i><img src="static/images/v2.jpg"></i>
            <p><a href="#">Python之if判断语句与while和for循环</a></p>
            <span>2018-05-13</span>
          </li>
        </ul>
      </div>
      <div class="tuijian">
        <h2 class="hometitle">点击排行</h2>
        <ul class="tjpic">
          <i><img src="static/images/toppic01.jpg"></i>
          <p><a href="#">Python语言在人工智能(AI)中的优势</a></p>
        </ul>
        <ul class="sidenews">
          <li> <i><img src="static/images/toppic01.jpg"></i>
            <p><a href="#">精通Python编程——Python深入浅出教程</a></p>
            <span>2018-05-13</span>
          </li>
          <li> <i><img src="static/images/toppic02.jpg"></i>
            <p><a href="#">人生苦短 Python当歌</a></p>
            <span>2018-05-13</span>
          </li>
          <li> <i><img src="static/images/v1.jpg"></i>
            <p><a href="#">Python学习笔记：虚拟环境和包</a></p>
            <span>2018-05-13</span>
          </li>
          <li> <i><img src="static/images/v2.jpg"></i>
            <p><a href="#">python中打开TXT文件报错</a></p>
            <span>2018-05-13</span>
          </li>
        </ul>
      </div>
      <div class="cloud">
        <h2 class="hometitle">标签云</h2>
        <ul>
          <a href="#">陌上花开</a> <a href="#">校园生活</a> <a href="#">html5</a> <a href="#">SumSung</a> <a href="#">青春</a> <a
            href="#">温暖</a> <a href="#">阳光</a> <a href="#">三星</a><a href="#">索尼</a> <a href="#">华维荣耀</a> <a href="#">三星</a>
          <a href="#">索尼</a>
        </ul>
      </div>
      <div class="links">
        <h2 class="hometitle">友情链接</h2>
        <ul>
          <li><a href="#" target="_blank">达内</a></li>
          <li><a href="#" target="_blank">亿元级IT教育领军企业</a></li>
          <li><a href="#" target="_blank">人工智能改变世界</a></li>
        </ul>
      </div>
      <div class="guanzhu" id="follow-us">
        <h2 class="hometitle">关注我们 么哒！</h2>
        <ul>
          <li class="tencent"><a href="#" target="_blank"><span>微信咨询</span>XXX</a></li>
          <li class="qq"><a href="#" target="_blank"><span>QQ号</span>XXXXXX</a></li>
          <li class="email"><a href="#" target="_blank"><span>邮箱帐号</span>tedu.cn</a></li>
          <li class="wxgzh"><a href="#" target="_blank"><span>咨询电话</span>xxxxxxxxxxx</a></li>
        </ul>
      </div>
    </div>
  </article>
  <footer id="footer">
    <p>Design by <a href=# target="_blank">个人博客</a> <a href="#">备XXXXXXXXX号-1</a></p>
  </footer>
  <a href="#" class="cd-top">Top</a>
</body>
<script>
    var token = window.localStorage.getItem('dnblog_token');
    var username = window.localStorage.getItem('dnblog_user');
    console.log(username)
    if (username !=null) {
      $()
      $('#login').css("display", "none");
      $('#register').css("display", "none");
      $('#login_out').css("display", "block");
      $('.logo a').text(username + "博客");
    }
    else {
      $('.logo a').text("博客");
    }
    // var arrUrl = url.split("//");
    //当前访问的博客博主
    // var blog_username = arrUrl[1].split('/')[1];
    var html_body = '';
    $.ajax({
        // 请求方式
        type:'put',
        url: "http://127.0.0.1:8000/v1/text",
        // beforeSend: function(request) {
        //     request.setRequestHeader("Authorization", token);
        // },
        success:function (result) {
            console.log(result)
            if (200 == result.code){
                html_body += '<div class="container">';
                var topics = result.data.topics;
                for(var t in topics){
                        var title = topics[t].title;
                        var category = topics[t].category;
                        var created_time = topics[t].created_time;
                        var introduce = topics[t].introduce;
                        var author = topics[t].author;
                        // html_body +='<p>hahaahshshdhs</p>'
                        html_body += '<div class="blogsbox">';
                        html_body += '<div class="blogs" data-scroll-reveal="enter bottom over 1s">';
                        // /<username>/topics/detail/<t_id>
                        var detail_url = '/' + author + '/topics/detail/' + topics[t].id
                        html_body += '<h3 class="blogtitle"><a href="' + detail_url + '"' + ' target="_blank">' + title + '</a></h3>';
                        html_body += '<p class="blogtext">';
                        html_body += introduce;
                        html_body += '...</p>'
                        //html_body += '<p class="blogtext">'+ '12345' + '...</p>';
                        html_body += '<div class="bloginfo">';
                        html_body += '<ul>';
                        html_body += '<li class="author">' + author + '</li>';
                        html_body += '<li class="timer">' + created_time +  '</li>';
                        // if(blog_username == username){
                        //     html_body += '<li class="" style="display:none"></li>';
                        //     html_body += '<li class="" style="padding-left:20px">编辑</li>';
                        //     html_body += '<li class="delete" style="padding-left:20px" data=' + topics[t].id +'>删除</li>';
                        // }
                        html_body += '</ul>';
                        html_body += '</div>';
                        html_body += '</div>';
                        html_body += '</div>';
                    }

                }

                html_body += '</div>';
                $('.container').html(html_body);
                //绑定登出
                loginOut()
                //初始化scroll
                scrollReveal.init();

                //下拉菜单
                $('.nav>li').hover(function () {
                    $(this).children('ul').stop(true, true).show(400);
                }, function () {
                    $(this).children('ul').stop(true, true).hide(400);
                });

                //添加删除事件
                // $('.delete').on('click', function(){
                //     var delete_id = $(this).attr('data');
                //     var delete_url = "http://127.0.0.1:8000/v1/topics/"+ blog_username + "?" + 't_id=' + delete_id;
                //     $.ajax({
                //         // 请求方式
                //         type:"delete",
                //         url: delete_url,
                //         beforeSend: function(request) {
                //             request.setRequestHeader("Authorization", token);
                //         },
                //         success:function (result) {
                //             if (200 == result.code){
                //
                //                alert('删除成功');
                //                window.location.reload()
                //
                //             }else{
                //
                //                alert('删除失败');
                //
                //             }
                //         }
                //
                //     })
                // });


          }
      });

</script>
</html>
